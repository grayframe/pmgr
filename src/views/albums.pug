extends layout

block content
  article.albums
    header.albums-header
      h1 Your Albums
      a.button(href="/albums/new") Create Album

    section.albums-grid
      if albums.length === 0
        .empty-state
          p You haven't created any albums yet.
          a.button(href="/albums/new") Create your first album
      else
        each album in albums
          .album-card
            .album-cover
              if album.Photos && album.Photos.length > 0
                img(src=album.Photos[0].url alt=album.title)
              else
                .placeholder No photos
            .album-info
              h3= album.title
              if album.description
                p= album.description
              p.photo-count #{album.Photos.length} photos
              .album-actions
                a.button(href=`/albums/${album.id}`) View
                a.button(href=`/albums/${album.id}/edit`) Edit
                a.button.delete(href=`/albums/${album.id}/delete`) Delete

block scripts
  script.
    function deleteAlbum(albumId) {
      if (confirm('Are you sure you want to delete this album?')) {
        fetch(`/albums/${albumId}`, {
          method: 'DELETE'
        })
        .then(response => {
          if (!response.ok) {
            throw new Error('Delete failed');
          }
          window.location.reload();
        })
        .catch(error => {
          console.error('Delete error:', error);
          alert('Failed to delete album');
        });
      }
    } 