extends layout

block content
  .container.mx-auto.px-4.py-8
    .flex.justify-between.items-center.mb-8
      h1.text-3xl.font-bold.text-gray-900 My Albums
      a.bg-blue-500.hover:bg-blue-600.text-white.font-semibold.py-2.px-4.rounded(href="/albums/create")
        | Create Album

    //- Albums Grid
    .grid.grid-cols-1.md:grid-cols-2.lg:grid-cols-3.gap-6
      each album in albums
        .bg-white.rounded-lg.shadow-md.overflow-hidden
          //- Album Cover
          .relative.h-48.bg-gray-100
            if album.Photos && album.Photos.length > 0
              img.w-full.h-full.object-cover(src=album.Photos[0].url alt=album.name)
            else
              .flex.items-center.justify-center.h-full
                svg.w-12.h-12.text-gray-400(xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor")
                  path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z")

          //- Album Info
          .p-4
            h2.text-xl.font-semibold.text-gray-900= album.name
            if album.description
              p.text-gray-600.mt-2= album.description
            .mt-4.flex.justify-between.items-center
              .text-sm.text-gray-500
                | #{album.Photos ? album.Photos.length : 0} photos
              .flex.space-x-2
                a.text-blue-500.hover:text-blue-600(href=`/albums/${album.id}`)
                  | View
                button.text-red-500.hover:text-red-600(onclick=`deleteAlbum(${album.id})`)
                  | Delete

    //- Empty State
    if albums.length === 0
      .text-center.py-12
        svg.mx-auto.h-12.w-12.text-gray-400(xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor")
          path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10")
        h3.mt-2.text-sm.font-medium.text-gray-900 No albums
        p.mt-1.text-sm.text-gray-500 Get started by creating a new album.
        .mt-6
          a.inline-flex.items-center.px-4.py-2.border.border-transparent.shadow-sm.text-sm.font-medium.rounded-md.text-white.bg-blue-600.hover:bg-blue-700(href="/albums/create")
            | Create Album

block scripts
  script.
    function deleteAlbum(albumId) {
      if (confirm('Are you sure you want to delete this album?')) {
        fetch(`/albums/${albumId}`, {
          method: 'DELETE'
        })
        .then(response => {
          if (!response.ok) {
            throw new Error('Delete failed');
          }
          window.location.reload();
        })
        .catch(error => {
          console.error('Delete error:', error);
          alert('Failed to delete album');
        });
      }
    } 