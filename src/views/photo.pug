extends layout

block content
  .container.mx-auto.px-4.py-8
    .max-w-4xl.mx-auto
      //- Photo Header
      .flex.justify-between.items-center.mb-6
        h1.text-3xl.font-bold.text-gray-900= photo.title
        .flex.space-x-4
          a.bg-blue-500.hover:bg-blue-600.text-white.font-semibold.py-2.px-4.rounded(href=`/photos/${photo.id}/edit`)
            | Edit
          button.bg-red-500.hover:bg-red-600.text-white.font-semibold.py-2.px-4.rounded(onclick=`deletePhoto(${photo.id})`)
            | Delete

      //- Main Photo
      .bg-white.rounded-lg.shadow-lg.overflow-hidden.mb-6
        img.w-full.h-auto.object-contain(src=photo.url alt=photo.title)

      //- Photo Details
      .bg-white.rounded-lg.shadow-lg.p-6
        .grid.grid-cols-1.md:grid-cols-2.gap-6
          .space-y-4
            h2.text-xl.font-semibold.text-gray-900 Photo Details
            if photo.description
              p.text-gray-600= photo.description
            else
              p.text-gray-500.italic No description provided
            .text-sm.text-gray-500
              | Uploaded #{new Date(photo.createdAt).toLocaleDateString()}
              if photo.updatedAt !== photo.createdAt
                br
                | Last updated #{new Date(photo.updatedAt).toLocaleDateString()}

          .space-y-4
            h2.text-xl.font-semibold.text-gray-900 Photo Information
            dl.grid.grid-cols-2.gap-4
              dt.text-sm.font-medium.text-gray-500 File Name
              dd.text-sm.text-gray-900= photo.originalName
              dt.text-sm.font-medium.text-gray-500 File Size
              dd.text-sm.text-gray-900= (photo.fileSize / 1024 / 1024).toFixed(2) + ' MB'
              dt.text-sm.font-medium.text-gray-500 MIME Type
              dd.text-sm.text-gray-900= photo.mimeType
              dt.text-sm.font-medium.text-gray-500 Dimensions
              dd.text-sm.text-gray-900= photo.width + ' Ã— ' + photo.height

      //- Albums Section
      if photo.albums && photo.albums.length > 0
        .bg-white.rounded-lg.shadow-lg.p-6.mt-6
          h2.text-xl.font-semibold.text-gray-900.mb-4 Albums
          .grid.grid-cols-1.md:grid-cols-2.lg:grid-cols-3.gap-4
            each album in photo.albums
              a.bg-gray-50.hover:bg-gray-100.rounded-lg.p-4(href=`/albums/${album.id}`)
                h3.text-lg.font-medium.text-gray-900= album.name
                if album.description
                  p.text-sm.text-gray-500= album.description

block scripts
  script.
    function deletePhoto(photoId) {
      if (confirm('Are you sure you want to delete this photo?')) {
        fetch(`/api/photos/${photoId}`, {
          method: 'DELETE'
        })
        .then(response => {
          if (!response.ok) {
            throw new Error('Delete failed');
          }
          window.location.href = '/';
        })
        .catch(error => {
          console.error('Delete error:', error);
          alert('Failed to delete photo');
        });
      }
    } 